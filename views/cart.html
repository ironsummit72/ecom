<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style/cart.css" />

    <title>Cart</title>
  </head>
  <body>
    <section id="cart-section" class="cart-section">
<div class="cart-containers" id="cart-containers">
  <h1 id="heading">Shopping Cart</h1>
  <hr>
    </section> 
  </body>
  <script>
   // DOM Nodes
   const cartcontainers=document.getElementById('cart-containers');


   

    let cartdata = localStorage.getItem("cartData");

    getData(cartdata);
    async function getData(data) {
      try {
        const response = await fetch(
          "http://localhost:3000/cartData?cartitems=" + data
        );
        const cartData = await response.text();
        let fromServer = JSON.parse(cartData);
        fromServer.forEach((data) => {
          let ProductName = data.ProductName;
          let ProductPrice = data.ProductPrice;
          let ProductImage = data.Paths[0].path;
          CreateCartItems(ProductName, ProductPrice, ProductImage);
        });
      } catch (error) {}
    }

    function CreateCartItems(ProductName, ProductPrice, ImageUrl) {
      const cartItem=document.createElement('div');
      cartItem.className="cartItems"; //setting class
      const productimage=document.createElement('img');
      productimage.className='productimage';//setting class
      productimage.src=ImageUrl; // adding image url
      const infoDiv=document.createElement('div');// div element created
      infoDiv.className="info";
      const producttitle=document.createElement('h2'); //product title created
      producttitle.className='producttitle';
      producttitle.innerText=ProductName;
      const productprice=document.createElement('h3')
      productprice.className="productprice";
      productprice.innerText="Rs. "+ProductPrice;



      
      cartItem.appendChild(productimage);
      cartItem.appendChild(infoDiv);
      infoDiv.appendChild(producttitle)
      infoDiv.appendChild(productprice)

      cartcontainers.appendChild(cartItem)


   
    }
  </script>
</html>
